# Домашнее задание 8. Работа с загрузчиком
#### Текст задания
1. Попасть в систему без пароля несколькими способами  
2. Установить систему с LVM, после чего переименовать VG  
3. Добавить модуль в initrd  

#### Описание файлов в репозитории

Директория centos_8s - содержит Vagrantfile для запуска ВМ для выполнения задания № 1.  
Директория lvm - содержит Vagrantfile для запуска ВМ для выполнения заданий № 2 и 3.  
  
#### Инструкция по запуску стенда
##### Для выполнения задания № 1:
В домашнем каталоге создаем каталог centos_8s и копируем в него файлы из каталога centos_8s репозитория.
Поднимаем ВМ:  
vagrant up 
###### Способ 1
Перезагружаем ВМ. В GUI ВМ в VirtualBox при выборе ядра для загрузки нажимаем e. В конце строки, начинающейся с "linux", добавляем init=/bin/sh и нажимаем сtrl-x для загрузки в систему.  
Попадаем в систему, приглашение командной строки вида sh-4.4#  
Перемонтируем рутовую файловую систему в режим Read-Write:  
mount -o remount,rw /  
Меняем пароль root:  
passwd  
Для последующей перемаркировки меток в системе создаем файл:  
touch /.autorelabel  
Перезагружаемся. После повторной перезагрузки ВМ проверяем вход с новым паролем root - успешно. 
###### Способ 2
Перезагружаем ВМ. В GUI ВМ в VirtualBox при выборе ядра для загрузки нажимаем e. В конце строки, начинающейся с "linux", добавляем rd.break и нажимаем сtrl-x для загрузки в систему.  
Попадаем в emergency mode, приглашение командной строки вида switch_root:/# 
Перемонтируем корневую файловую систему (находящуюся в /sysroot) в режим Read-Write, далее делаем ее новым корнем ФС и повторяем манипуляции по смене пароля root по той же схеме, что и в "Способе 1":  
mount -o remount,rw /sysroot  
chroot /sysroot  
passwd root  
touch /.autorelabel  
Перезагружаемся. После повторной перезагрузки ВМ проверяем вход с новым паролем root - успешно.  
###### Способ 3
Перезагружаем ВМ. В GUI ВМ в VirtualBox при выборе ядра для загрузки нажимаем e. В конце строки, начинающейся с "linux", заменяем ro на rw init=/sysroot/bin/sh и нажимаем сtrl-x для загрузки в систему.  
Попадаем в emergency mode, приглашение командной строки вида :/#  
Повторяем манипуляции по смене пароля root по той же схеме, что и в "Способе 2", за исключением перемонтирования ФС в режим Read-Write:  
chroot /sysroot  
passwd
touch /.autorelabel 
Перезагружаемся. После повторной перезагрузки ВМ проверяем вход с новым паролем root - успешно.  
##### Для выполнения заданий № 2 и 3:
В домашнем каталоге создаем каталог lvm и копируем в него файлы из каталога lvm репозитория.
Поднимаем ВМ и подключаемся к ней:  
vagrant up  
vagrant ssh  
Далее проводим действия по выполнению 2-го и 3-го задания (залогированы утилитой script, файлы lvm_2.log и lvm_3.log).  
